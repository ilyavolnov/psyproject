// Update sex education webinar with all required blocks
const initSqlJs = require('sql.js');
const fs = require('fs');
const path = require('path');

const dbPath = path.join(__dirname, 'database.sqlite');

async function updateSexEducationWebinar() {
    try {
        console.log('Updating "–ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –¥–µ—Ç–µ–π" webinar with complete blocks...');

        const SQL = await initSqlJs();
        const buffer = fs.readFileSync(dbPath);
        const db = new SQL.Database(buffer);

        // Updated page blocks structure based on provided information
        const pageBlocks = [
            {
                type: 'hero',
                data: {
                    image: 'https://dr-rumyantceva.ru/wp-content/uploads/2024/05/img-25-e1719236638706-1024x1020.jpg',
                    title: '–í–µ–±–∏–Ω–∞—Ä: "–ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –¥–µ—Ç–µ–π"',
                    price: 2900,
                    startDate: '–ß–ï–†–ù–ê–Ø –ü–Ø–¢–ù–ò–¶–ê',
                    paymentInstructions: '–ù–∞ –Ω–æ–º–µ—Ä –≤ WhatsApp 8 921 188 07 55 –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω –æ–ø–ª–∞—Ç—ã (–∏–ª–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π —á–µ–∫). –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —è —Å–≤—è–∂—É—Å—å —Å –í–∞–º–∏ –≤ What\'sApp.'
                }
            },
            {
                type: 'description',
                data: {
                    image: 'https://dr-rumyantceva.ru/wp-content/uploads/2024/05/img-25-e1719236638706-1024x1020.jpg',
                    title: '–ß—ë—Ç–∫–∏–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π',
                    subtitle: '–ó–∞ 100 –º–∏–Ω—É—Ç –í—ã —É—Å–ª—ã—à–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –æ—Å—Ç—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç –¥–µ—Ç—Å–∫–æ–≥–æ –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–≥–æ –≤—Ä–∞—á–∞-–ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∞, —Å–µ–∫—Å–æ–ª–æ–≥–∞ –∏ –º–∞–º—ã',
                    contentType: '–í–∏–¥–µ–æ-–ª–µ–∫—Ü–∏—è, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è'
                }
            },
            {
                type: 'program',
                data: {
                    title: '–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤–µ–±–∏–Ω–∞—Ä',
                    items: [
                        '–ß–µ–∫-–ª–∏—Å—Ç: "–ß—Ç–æ —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –æ —Å–µ–±–µ, –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∏ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ —à–∫–æ–ª—ã?"',
                        '–ë–µ—Ä–µ–∂–Ω–æ –æ –≤–∞–∂–Ω–æ–º: "–ö–∞–∫ –∏ –∫–æ–≥–¥–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–±—ë–Ω–∫—É ‚Äì —á—Ç–æ —Ç–∞–∫–æ–µ —Å–µ–∫—Å –∏ –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–µ—Ç–∏?"',
                        '–î–µ—Ç—Å–∫–∞—è –º–∞—Å—Ç—É—Ä–±–∞—Ü–∏—è: –≥–¥–µ –∫–æ–Ω—á–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–∞—Ç–æ–ª–æ–≥–∏—è? –°—Ö–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏–π.',
                        '–í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –∫—Ä–∏–∑—ã –≥–ª–∞–∑–∞–º–∏ –≤—Ä–∞—á–∞-—Å–µ–∫—Å–æ–ª–æ–≥–∞: "–ö–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—è–º –ø–µ—Ä–µ–∂–∏—Ç—å –∫—Ä–∏–∑–∏—Å —Ä–µ–±—ë–Ω–∫–∞ –∏ –Ω–µ —É—Ö—É–¥—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è?"',
                        '–ü–æ–ª–æ–≤–æ–µ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏–µ: –ø—Ä–æ –º–µ—Å—è—á–Ω—ã–µ –∏ –ø–æ–ª–ª—é—Ü–∏–∏ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –∏ –æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è.',
                        '–ö–æ–Ω—Ç—Ä–∞—Ü–µ–ø—Ü–∏—è: –ö–∞–∫ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —Å—Ä–µ–¥—Å—Ç–≤–∞—Ö –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –¥–µ—Ç–∏ –Ω–µ –≤–æ—Å–ø—Ä–∏–Ω—è–ª–∏ —ç—Ç–æ –∫–∞–∫ "—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ" –∫ –¥–µ–π—Å—Ç–≤–∏—é?"',
                        '–û—Å–Ω–æ–≤—ã –ø–æ–ª–æ–≤–æ–≥–æ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è: –Ω–µ –∑–∞–ø—É–≥–∏–≤–∞—é—â–∞—è –º–∞–º–∞, –∞ –º–∞–º–∞, –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å!'
                    ]
                }
            },
            {
                type: 'features',
                data: {
                    image: 'https://dr-rumyantceva.ru/wp-content/uploads/2024/05/img-25-e1719236638706-1024x1020.jpg',
                    imagePosition: 'right',
                    title: '–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ',
                    items: [
                        '–í–∏–¥–µ–æ –≤ –ª–µ–∫—Ü–∏–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ',
                        '–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é',
                        '–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è',
                        '–î–æ—Å—Ç—É–ø –∫ –≤–∏–¥–µ–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—É 3 –º–µ—Å—è—Ü–∞',
                        '–ü—Ä–æ—Å–º–æ—Ç—Ä –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è'
                    ]
                }
            },
            {
                type: 'author',
                data: {
                    photo: 'images/specialists/margarita.jpg',
                    name: '–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ –†—É–º—è–Ω—Ü–µ–≤–∞',
                    credentials: [
                        '–í—Ä–∞—á-–ø—Å–∏—Ö–∏–∞—Ç—Ä, –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç, —Å–µ–∫—Å–æ–ª–æ–≥ (—Å—Ç–∞–∂ —Å 2009 –≥., –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –±–æ–ª—å–Ω–∏—Ü–µ –∏–º. –ü. –ü. –ö–∞—â–µ–Ω–∫–æ –±–æ–ª–µ–µ 10 –ª–µ—Ç)',
                        'EMDR-—Ç–µ—Ä–∞–ø–µ–≤—Ç —Å –∞–∫–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏–µ–π –≤ –ï–≤—Ä–æ–ø–µ',
                        '–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –°—É–ø–µ—Ä–≤–∏–∑–æ—Ä',
                        '–ì—Ä—É–ø–ø–æ–≤–æ–π –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç',
                        '–°–µ–º–µ–π–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
                        'IFS-—Ç–µ—Ä–∞–ø–µ–≤—Ç',
                        '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ò–Ω—Å—Ç–∏—Ç—É—Ç–∞ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ü—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –ò–º–∞—Ç–æ–Ω, –¶–µ–Ω—Ç—Ä–∞ EMDR/–î–ü–î–ì –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ',
                        '–≠–∫—Å–ø–µ—Ä—Ç —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –¢–í-–∫–∞–Ω–∞–ª–∞ ¬´–ü—è—Ç–Ω–∏—Ü–∞¬ª',
                        '–°–æ–∑–¥–∞—Ç–µ–ª—å –æ–±—É—á–∞—é—â–∏—Ö –∫—É—Ä—Å–æ–≤ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–æ–≤ –∏ –∞–≤—Ç–æ—Ä –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç–æ–≤ (–∑–∞–ø—É—Å–∫–∏ —Å 2018 –≥.)'
                    ]
                }
            }
        ];

        // Update the webinar in the database
        const updateQuery = `
            UPDATE courses 
            SET 
                price = ?,
                release_date = ?,
                access_duration = ?,
                page_blocks = ?,
                subtitle = ?,
                description = ?
            WHERE title LIKE '%–ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –¥–µ—Ç–µ–π%'
        `;

        const price = 2900; // Updated price
        const releaseDate = '–ß–ï–†–ù–ê–Ø –ü–Ø–¢–ù–ò–¶–ê';
        const accessDuration = '3 –º–µ—Å—è—Ü–∞';
        const subtitle = '–ß—ë—Ç–∫–∏–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π';
        const description = '–ó–∞ 100 –º–∏–Ω—É—Ç –í—ã —É—Å–ª—ã—à–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –æ—Å—Ç—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç –¥–µ—Ç—Å–∫–æ–≥–æ –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–≥–æ –≤—Ä–∞—á–∞-–ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∞, —Å–µ–∫—Å–æ–ª–æ–≥–∞ –∏ –º–∞–º—ã. –í–∏–¥–µ–æ –≤ –ª–µ–∫—Ü–∏–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è.';

        db.run(updateQuery, [
            price,
            releaseDate,
            accessDuration,
            JSON.stringify(pageBlocks),
            subtitle,
            description
        ]);

        // Save database
        const data = db.export();
        fs.writeFileSync(dbPath, data);
        db.close();

        console.log('‚úÖ "–ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –¥–µ—Ç–µ–π" webinar updated successfully with complete blocks!');
        console.log('üí∞ Price updated to 2900 ‚ÇΩ');
        console.log('üìÖ Release date updated to "–ß–ï–†–ù–ê–Ø –ü–Ø–¢–ù–ò–¶–ê"');
        console.log('üïí Access duration updated to "3 –º–µ—Å—è—Ü–∞"');
        console.log('üìã Added complete page blocks structure');

    } catch (error) {
        console.error('‚ùå Failed to update webinar:', error);
        process.exit(1);
    }
}

updateSexEducationWebinar();